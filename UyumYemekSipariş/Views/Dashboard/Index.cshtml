@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/_RestaurantOwnerLayout.cshtml";
}

<div class="content-wrapper">
    <div class="row">
        <div class="col-md-8 grid-margin stretch-card">
            <div class="card">
                <div class="card-body performane-indicator-card">
                    <div class="d-sm-flex">
                        <h4 class="card-title flex-shrink-1">Performans Göstergeleri</h4>
                        <p class="m-sm-0 ms-sm-auto flex-shrink-0">
                            <span class="data-time-range ms-0">7g</span>
                            <span class="data-time-range active">2h</span>
                            <span class="data-time-range">1a</span>
                            <span class="data-time-range">3a</span>
                            <span class="data-time-range">6a</span>
                        </p>
                    </div>
                    <div class="d-sm-flex flex-wrap mt-3">
                        <div class="d-flex align-items-center">
                            <span class="dot-indicator bg-primary ms-2"></span>
                            <p class="mb-0 ms-2 text-muted font-weight-semibold">Günlük Sipariş (@ViewBag.ActiveOrders)</p>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="dot-indicator bg-info ms-2"></span>
                            <p class="mb-0 ms-2 text-muted font-weight-semibold">Tamamlanan (@ViewBag.TotalOrders)</p>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="dot-indicator bg-danger ms-2"></span>
                            <p class="mb-0 ms-2 text-muted font-weight-semibold">Ürün Sayısı (@ViewBag.TotalProducts)</p>
                        </div>
                    </div>
                    <div class="dotted-chart-height">
                        <canvas id="performance-indicator-chart" class="mt-5"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Sipariş Durumları</h4>
                    <div class="aligner-wrapper py-3">
                        <div class="doughnut-chart-height">
                            <canvas id="sessionsDoughnutChart" height="210"></canvas>
                        </div>
                        <div class="wrapper d-flex flex-column justify-content-center absolute absolute-center">
                            <h2 class="text-center mb-0 font-weight-bold">@ViewBag.TotalOrders</h2>
                            <small class="d-block text-center text-muted font-weight-semibold mb-0">Toplam Sipariş</small>
                        </div>
                    </div>
                    <div class="wrapper mt-4 d-flex flex-wrap align-items-center">
                        <div class="d-flex">
                            <span class="square-indicator bg-warning ms-2"></span>
                            <p class="mb-0 ms-2">Bekleyen</p>
                        </div>
                        <div class="d-flex">
                            <span class="square-indicator bg-success ms-2"></span>
                            <p class="mb-0 ms-2">Teslim Edildi</p>
                        </div>
                        <div class="d-flex">
                            <span class="square-indicator bg-danger ms-2"></span>
                            <p class="mb-0 ms-2">İptal</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

  
    <div class="row quick-action-toolbar">
        <div class="col-md-12 grid-margin">
            <div class="card">
                <div class="card-header d-block d-md-flex">
                    <h5 class="mb-0">Hızlı İşlemler</h5>
                    <p class="ms-auto mb-0">Restoran yönetim paneline hoş geldiniz! <i class="icon-bulb"></i></p>
                </div>
                <div class="d-md-flex row m-0 quick-action-btns" role="group" aria-label="Quick action buttons">
                    <div class="col-sm-6 col-md-3 p-3 text-center btn-wrapper">
                        <a href="/Categories/Ekle" class="btn px-0"> <i class="icon-layers me-2"></i> Kategori Ekle</a>
                    </div>
                    <div class="col-sm-6 col-md-3 p-3 text-center btn-wrapper">
                        <a href="/RProduct/Ekle" class="btn px-0"><i class="icon-globe me-2"></i> Ürün Ekle</a>
                    </div>
                    <div class="col-sm-6 col-md-3 p-3 text-center btn-wrapper">
                        <a href="/ROrders/Aktif" class="btn px-0"><i class="icon-book-open me-2"></i> Aktif Siparişler</a>
                    </div>
                    <div class="col-sm-6 col-md-3 p-3 text-center btn-wrapper">
                        <a href="/RRestaurant/Edit" class="btn px-0"><i class="icon-settings me-2"></i> Restoran Düzenle</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
  

    <div class="row">
        <div class="col-md-12 grid-margin">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="d-sm-flex align-items-baseline report-summary-header">
                                <h5 class="font-weight-semibold">@ViewBag.RestaurantName - Özet Rapor</h5>
                                <span class="ms-auto">Güncel Veriler</span>
                                <button class="btn btn-icons border-0 p-2" onclick="location.reload()"><i class="icon-refresh"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="row report-inner-cards-wrapper">
                        <div class="col-md-6 col-xl report-inner-card">
                            <div class="inner-card-text">
                                <span class="report-title">GÜNLÜK GELİR</span>
                                <h4>@ViewBag.DailyRevenue ₺</h4>
                                <span class="report-count">Bugünkü kazanç</span>
                            </div>
                            <div class="inner-card-icon bg-success">
                                <i class="icon-wallet"></i>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl report-inner-card">
                            <div class="inner-card-text">
                                <span class="report-title">TOPLAM SİPARİŞ</span>
                                <h4>@ViewBag.TotalOrders</h4>
                                <span class="report-count">Tüm zamanlar</span>
                            </div>
                            <div class="inner-card-icon bg-danger">
                                <i class="icon-basket"></i>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl report-inner-card">
                            <div class="inner-card-text">
                                <span class="report-title">ÜRÜN SAYISI</span>
                                <h4>@ViewBag.TotalProducts</h4>
                                <span class="report-count">Menüdeki ürünler</span>
                            </div>
                            <div class="inner-card-icon bg-primary">
                                <i class="icon-globe-alt"></i>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl report-inner-card">
                            <div class="inner-card-text">
                                <span class="report-title">AKTİF SİPARİŞ</span>
                                <h4>@ViewBag.ActiveOrders</h4>
                                <span class="report-count">Bekleyen siparişler</span>
                            </div>
                            <div class="inner-card-icon bg-warning">
                                <i class="icon-clock"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                        <h4 class="card-title mb-sm-0">Son Siparişler</h4>
                        <a href="/ROrders/Index" class="text-dark ms-auto mb-3 mb-sm-0">Tüm Siparişleri Gör</a>
                    </div>
                    <div class="table-responsive border rounded p-1">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th class="font-weight-bold">Müşteri</th>
                                    <th class="font-weight-bold">Sipariş No</th>
                                    <th class="font-weight-bold">Tutar</th>
                                    <th class="font-weight-bold">Tarih</th>
                                    <th class="font-weight-bold">Durum</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    var recentOrders = (List<UyumYemekSipariş.Models.Order>)ViewBag.RecentOrders;
                                }
                                @foreach (var order in recentOrders)
                                {
                                    <tr>
                                        <td>
                                        
                                            @(order.User?.FirstName + " " + order.User?.LastName ?? "Misafir")
                                        </td>
                                        <td>#@order.OrderID</td>
                                        <td>@order.TotalAmount ₺</td>
                                        <td>
                                            @String.Format("{0:dd.MM.yyyy HH:mm}", order.OrderDate)
                                        </td>
                                        <td>
                                            @if (order.Status == "Pending")
                                            {
                                                <div class="badge badge-warning p-2">Bekliyor</div>
                                            }
                                            else if (order.Status == "Confirmed")
                                            {
                                                <div class="badge badge-info p-2">Onaylandı</div>
                                            }
                                            else if (order.Status == "Delivered")
                                            {
                                                <div class="badge badge-success p-2">Teslim Edildi</div>
                                            }
                                            else if (order.Status == "Cancelled")
                                            {
                                                <div class="badge badge-danger p-2">İptal</div>
                                            }
                                            else
                                            {
                                                <div class="badge badge-secondary p-2">@order.Status</div>
                                            }
                                        </td>
                                    </tr>
                                }

                                @if (recentOrders != null && recentOrders.Count == 0)
                                {
                                    <tr>
                                        <td colspan="5" class="text-center text-muted">Henüz sipariş bulunmuyor</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex mt-4 flex-wrap align-items-center">
                        <p class="text-muted mb-sm-0">Son 5 sipariş gösteriliyor</p>
                        <nav class="ms-auto">
                            <ul class="pagination separated pagination-info mb-sm-0">
                                <li class="page-item"><a href="/ROrders/Index" class="page-link"><i class="icon-arrow-left"></i></a></li>
                                <li class="page-item active"><a href="#" class="page-link">1</a></li>
                                <li class="page-item"><a href="#" class="page-link">2</a></li>
                                <li class="page-item"><a href="#" class="page-link">3</a></li>
                                <li class="page-item"><a href="#" class="page-link">4</a></li>
                                <li class="page-item"><a href="/ROrders/Index" class="page-link"><i class="icon-arrow-right"></i></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>